- test:
    before: userAccountService.followUser
    name: GIVEN create user account to follow
    serviceFunctionName: userAccountService.createUserAccount
    argument:
      userName: test2@test.com
    response:
      tests:
        - pm.collectionVariables.set('followedUserAccountId', body._id)

- test:
    after: userAccountService.followUser
    name: THEN user account follows another user account
    serviceFunctionName: userAccountService.getUserAccount
    response:
      tests:
        - pm.expect(body.followedUserAccounts[0]._id).to.eql(pm.collectionVariables.get('followedUserAccountId'))

- test:
    after: userAccountService.followUser
    name: THEN another user account has following user account
    serviceFunctionName: userAccountService.getUserAccount
    argument:
      userName: test2@test.com
    response:
      tests:
        - pm.expect(body.followingUserAccounts[0]._id).to.eql(pm.collectionVariables.get('userAccountId'))
