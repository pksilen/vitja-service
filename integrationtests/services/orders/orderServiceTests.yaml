- testTemplate:
    executeAfter: ordersService.updateOrderItemState
    serviceFunctionName: ordersService.updateOrderItemState
    argument:
      newState: '{{newState}}'
    response:
      statusCode: 200
  tests:
    - testName: newState = delivered
      testProperties:
        newState: delivered
    - testName: newState = returning
      testProperties:
        newState: returning
    - testName: newState = returned
      testProperties:
        newState: returned

- testTemplate:
    executeAfter: ordersService.createOrder
    serviceFunctionName: salesItemsService.getSalesItemById
    response:
      statusCode: 200
      tests:
        - pm.expect(response.state).to.eql('sold');
  tests:
    - testName: state == sold

- testTemplate:
    executeAfter: ordersService.updateOrderItemState
    serviceFunctionName: salesItemsService.getSalesItemById
    response:
      statusCode: 200
      tests:
        - pm.expect(response.state).to.eql('forSale');
  tests:
    - testName: state == forSale
