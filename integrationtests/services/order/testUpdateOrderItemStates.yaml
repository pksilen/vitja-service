- testTemplate:
    serviceFunctionName: orderService.updateOrderItemState
    argument:
      orderItems:
        - state: '{{newState}}'
    executeAfter: orderService.updateOrderItemState
  tests:
    - testName: update order item state to delivered
      testProperties:
        newState: delivered
    - testName: update order item state to returning
      testProperties:
        newState: returning
    - testName: update order item state to returned
      testProperties:
        newState: returned

- testTemplate:
    serviceFunctionName: salesItemService.getSalesItem
    response:
      tests:
        - pm.expect(response.state).to.eql('forSale');
    executeAfter: orderService.updateOrderItemState
  tests:
    - testName: expect sales item state to be for sale after being returned
